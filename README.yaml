name: "aws-organization"
github_repo: "cloudposse-terraform-components/aws-organization"
description: |-
  This component is responsible for creating or importing a single AWS Organization.

  Unlike the monolithic `account` component which manages the entire organization hierarchy,
  this component follows the single-resource pattern - it only manages the AWS Organization itself.

  > [!NOTE]
  >
  > This component should be deployed from the **management/root account** as it creates/manages
  > the AWS Organization.

usage: |-
  **Stack Level**: Global (deployed in the management/root account)

  ### Basic Usage

  ```yaml
  components:
    terraform:
      aws-organization:
        vars:
          enabled: true
          aws_service_access_principals:
            - cloudtrail.amazonaws.com
            - guardduty.amazonaws.com
            - ram.amazonaws.com
            - sso.amazonaws.com
          enabled_policy_types:
            - SERVICE_CONTROL_POLICY
            - TAG_POLICY
  ```

  ### Importing an Existing Organization

  To import an existing AWS Organization:

  1. Get the organization ID:
     ```bash
     aws organizations describe-organization --query 'Organization.Id' --output text
     ```

  2. Set the `import_resource_id` variable:
     ```yaml
     components:
       terraform:
         aws-organization:
           vars:
             import_resource_id: "o-xxxxxxxxxx"
             aws_service_access_principals:
               - cloudtrail.amazonaws.com
               - guardduty.amazonaws.com
             enabled_policy_types:
               - SERVICE_CONTROL_POLICY
     ```

  3. Run `atmos terraform apply`

  After successful import, you can remove the `import_resource_id` variable.

  > **Note:** If you don't need import functionality, you can exclude `imports.tf` when vendoring the component.

  ## Related Components

  This component is part of a suite of single-resource components for AWS Organizations:

  | Component | Purpose |
  |-----------|---------|
  | `aws-organization` | Creates/imports the AWS Organization (this component) |
  | `aws-organizational-unit` | Creates/imports a single OU |
  | `aws-account` | Creates/imports a single AWS Account |
  | `aws-account-settings` | Configures account settings |
  | `aws-scp` | Creates/imports Service Control Policies |

references:
  - name: cloudposse-terraform-components
    url: https://github.com/orgs/cloudposse-terraform-components/repositories
    description: Cloud Posse's upstream components
  - name: AWS Organizations Documentation
    url: https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org.html
    description: AWS Organizations management documentation
  - name: OpenTofu Import Blocks
    url: https://opentofu.org/docs/language/import/
    description: OpenTofu 1.7+ import block documentation

tags:
  - component/aws-organization
  - layer/accounts
  - provider/aws
  - privileged

categories:
  - component/aws-organization
  - layer/accounts
  - provider/aws
  - privileged

license: "APACHE2"

badges:
  - name: Latest Release
    image: https://img.shields.io/github/release/cloudposse-terraform-components/aws-organization.svg?style=for-the-badge
    url: https://github.com/cloudposse-terraform-components/aws-organization/releases/latest
  - name: Slack Community
    image: https://slack.cloudposse.com/for-the-badge.svg
    url: https://slack.cloudposse.com

related:
  - name: "Cloud Posse Terraform Modules"
    description: Our collection of reusable Terraform modules used by our reference architectures.
    url: "https://docs.cloudposse.com/modules/"
  - name: "Atmos"
    description: "Atmos is like docker-compose but for your infrastructure"
    url: "https://atmos.tools"

contributors: []
